# Go的包

## Go包的基本概念

Go语言是使用包来组织源代码的，包（package）是多个 Go 源码的集合，是一种高级的代码复用方案。Go语言中为我们提供了很多内置包，如 fmt、os、io 等。

任何源代码文件必须属于某个包，同时源码文件的第一行有效代码必须是`package pacakgeName `语句，通过该语句声明自己所在的包。

Go语言的包借助了目录树的组织形式，一般包的名称就是其源文件所在目录的名称，虽然Go语言没有强制要求包名必须和其所在的目录名同名，但还是建议包名和所在目录同名，这样结构更清晰。

包可以定义在很深的目录中，包名的定义是不包括目录路径的，但是包在引用时一般使用全路径引用。比如在`GOPATH/src/a/b/ `下定义一个包 c。在包 c 的源码中只需声明为`package c`，而不是声明为`package a/b/c`，但是在导入 c 包时，需要带上路径，例如`import "a/b/c"`。

## 包的使用习惯

- 包名一般是小写的，使用一个简短且有意义的名称。
- 包名一般要和所在的目录同名，也可以不同，包名中不能包含`- `等特殊符号。
- 包一般使用域名作为目录名称，这样能保证包名的唯一性，比如 GitHub 项目的包一般会放到`GOPATH/src/github.com/userName/projectName `目录下。
- 包名为 main 的包为应用程序的入口包，编译不包含 main 包的源码文件时不会得到可执行文件。
- 一个文件夹下的所有源码文件只能属于同一个包，同样属于同一个包的源码文件不能放在多个文件夹下。
- 在包内定义的函数，大写字母开头，表示外部包可以使用，小写字母开头，表示只能再内部使用,直接使用即可

## 包的导入

要在代码中引用其他包的内容，需要使用**import**关键字导入其他的包，如下：

```go
import "包的路径"
```

注意：

- import 导入语句通常放在源码文件开头包声明语句的下面；
- 导入的包名需要使用双引号包裹起来；
- 包名是从`GOPATH/src/ `后开始计算的，使用`/ `进行路径分隔。

包的导入有两种写法，分别是单行导入和多行导入

### 单行导入

格式如下：

```go
import "包 1 的路径"
import "包 2 的路径"
```

### 多行导入

格式如下：

```go
import (
    "包 1 的路径"
    "包 2 的路径"
)
```

## 包导入的路径

包的引用路径有两种写法，分别是全路径导入和相对路径导入。

### 全路径导入

包的绝对路径就是`GOROOT/src/`或`GOPATH/src/`后面包的存放路径，如下所示：

```go
import "lab/test"
```

test 包是自定义的包，其源码位于`GOPATH/src/lab/test `目录下

### 相对路径导入

相对路径只能用于导入`GOPATH `下的包，标准包的导入只能使用全路径导入

如包a所在的路径在 `GOPATH/src/lab/a`，包b所在的路径在`GOPATH/src/lab/b`，如果在b中导入a，可以使用相对路径导入：

```go
// 相对路径导入
import "../a"
```

## init函数

所有包都可以包含一个init函数。init函数不应该有任何返回值类型和参数。init函数的形式如下：

```go
func init() {}
```

init函数可用于执行初始化任务，也可以用于在开始执行之前验证程序的正确性。

包的初始化顺序：

- 首先初始化包级别的变量
- 接着调用init函数。包内可以有多个init函数，按照编译器解析顺序进行调用
- 如果一个包导入了另一个包，会先初始化被导入的包；尽管一个包可能被导入多次，但是只会被初始化一次。

## 空白标识符

如果想导入包不使用，可以用 `_`下划线先接收包的函数，不调用

```go
package main

import "math"
var _ = math.Abs
func main() {

}
```

